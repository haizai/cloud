
jQuery(function ($) {

  
  var Codes = [
    {
      name: 'jquery-calendar',
      title: 'jquery日历',
      detail: '/demo/jquery-calendar/calendar.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/jquery-calendar',
      codes: [{
        name: 'calendar.js',
        type: 'javascript',
        text: "function Calendar(input) {\n  this.input = input\n  this.date = new Date()\n  this.container = null\n  this.head = null\n  this.content = null\n  this.init()\n}\n\nCalendar.prototype = {\n  init: function() {\n    this.container = $('<div></div>').attr('id', 'calendar')\n    this.input.after(this.container)\n    this.head = $('<div></div>').appendTo(this.container).addClass('head')\n    $('<div></div>')\n      .addClass('middle')\n      .html('<span>日</span><span>一</span><span>二</span><span>三</span><span>四</span><span>五</span><span>六</span>')\n      .appendTo(this.container)\n    this.content = $('<div></div').addClass('content').appendTo(this.container)\n    this.toggleDisplay()\n    this.render(this.date)\n    this.inputClick()\n  },\n  //渲染日历本身\n  render: function(date) {\n    var self = this\n    this.head.html('<span class=\"leftCreat\"></span>' + date.getFullYear() + '年' + (date.getMonth() + 1) + '月' + '<span class=\"rightCreat\"></span>')\n    this.content.html('')\n      //上个月补全\n    var lastdate = new Date(date.getFullYear(), date.getMonth(), 0) //上个月最后一天\n    if (lastdate.getDay() !== 6)\n      for (var i = lastdate.getDate() - lastdate.getDay(); i < lastdate.getDate() + 1; i++) {\n        ($('<span></span>').addClass('last').html(i)).appendTo(self.content)\n      }\n      //本月\n    var nextdate = new Date(date.getFullYear(), date.getMonth() + 1, 0) //这个月最后一天\n    for (var i = 1; i < nextdate.getDate() + 1; i++) {\n      ($('<span></span>').html(i)).appendTo(self.content)\n    }\n    //下个月\n    for (var i = 1; i < (7 - nextdate.getDay()); i++) {\n      ($('<span></span>').addClass('next').html(i)).appendTo(self.content)\n    }\n\n    this.content\n      .children()\n      .filter(function(index) {\n        return (index % 7 === 0 || index % 7 === 6)\n      })\n      .not($('.last'))\n      .not($('.next'))\n      .addClass('side')\n      //如果是本年本月,就激活今天\n    if (this.date.getMonth() === new Date().getMonth() && this.date.getFullYear() === new Date().getFullYear()) {\n      this.dateActive(date.getDate())\n    }\n    this.click()\n  },\n  //激活某一天\n  dateActive: function(date) {\n    this.content //复原\n      .children()\n      .filter($('.active'))\n      .removeClass('active')\n    this.content\n      .children()\n      .not($('.last'))\n      .not($('.next'))\n      .filter(function() {\n        return ($(this).text() == date)\n      })\n      .addClass('active')\n    this.input.text(this.head.text() + date + '日')\n  },\n  toggleDisplay: function() {\n    this.container.toggleClass('displayNone')\n  },\n  inputClick: function() {\n    var self = this\n    this.input.click(function() {\n      self.toggleDisplay()\n    })\n  },\n  click: function() {\n    var self = this\n      //点击本月的一天,则激活那天\n    this.content\n      .children()\n      .not($('.last'))\n      .not($('.next'))\n      .click(function() {\n        self.dateActive($(this).text())\n      })\n      //点击上月的一天,则来到上月,并激活\n    this.content\n      .children()\n      .filter($('.last'))\n      .click(function() {\n        self.lastMouth()\n        self.dateActive($(this).text())\n      })\n      //点击下月的一天,则来到下月,并激活\n    this.content\n      .children()\n      .filter($('.next'))\n      .click(function() {\n        self.nextMouth()\n        self.dateActive($(this).text())\n      })\n\n    this.head.find($('.leftCreat'))\n      .click(function() {\n        self.lastMouth()\n      })\n    this.head.find($('.rightCreat'))\n      .click(function() {\n        self.nextMouth()\n      })\n  },\n  lastMouth: function() {\n    this.date.setMonth(this.date.getMonth() - 1)\n    this.render(this.date)\n  },\n  nextMouth: function() {\n    this.date.setMonth(this.date.getMonth() + 1)\n    this.render(this.date)\n  },\n}\nnew Calendar($('#input'))"
      },{
        name: 'calendar.html',
        type: 'html',
        text: "<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <title>calendar</title>\n  <link rel=\"stylesheet\" href=\"calendar.css\">\n</head>\n<body>\n  <div id=\"input\"></div>\n  <script src=\"../../js/common/jquery-3.1.1.min.js\"></script>\n  <script src=\"calendar.js\"></script>\n</body>\n</html>"
      },{
        name: 'calendar.css',
        type: 'css',
        text: "body {\n  font: 20px/2 simhei;\n}\n#input {\n  width: 310px;\n  height: 40px;\n  margin: 20px auto 10px;\n  cursor: pointer;\n  text-align: center;\n  border: 1px solid #ccc;\n}\n#calendar {\n  width: 280px;\n  margin: auto;\n  padding: 5px 15px;\n  border: 1px solid #ccc;\n}\n.displayNone {\n  display: none;\n}\n.head {\n  font-size: 22px;\n  line-height: 30px;\n  position: relative;\n  text-align: center;\n  color: #fff;\n  background: #d14141;\n}\n.leftCreat {\n  position: absolute;\n  top: 8px;\n  left: 8px;\n  cursor: pointer;\n  border-top: 8px solid transparent;\n  border-right: 12px solid #fff;\n  border-bottom: 8px solid transparent;\n}\n.rightCreat {\n  position: absolute;\n  top: 8px;\n  right: 8px;\n  cursor: pointer;\n  border-top: 8px solid transparent;\n  border-bottom: 8px solid transparent;\n  border-left: 12px solid #fff;\n}\n.middle > span,\n.content > span {\n  display: inline-block;\n  width: 40px;\n  text-align: center;\n}\n.content > span:hover {\n  cursor: pointer;\n  background: #eee;\n}\n.content > span.last,\n.content > span.next {\n  color: #ccc;\n}\n.content > span.side {\n  color: #d14141;\n}\n.content > span.active {\n  color: #fff;\n  background: #d14141;\n}"
      }]
    },
    {
      name: 'jquery-todos',
      title: 'jquery Todos',
      detail: 'demo/jquery-todos/todos.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/jquery-todos',
      codes: [{
        name: 'todos.js',
        type: 'javascript',
        text: "jQuery(function($) {\n  var NAME = 'jQuery-todos-haizai'\n  var App = {\n    init: function () {\n      this.todos = JSON.parse(window.localStorage.getItem(NAME)) || [{text: \"默认todo1\", selected: false}, {text: \"默认todo2\", selected: true}]\n      this.visibility = '全部'\n      this.bindEvents()\n      this.render()\n    },\n    bindEvents: function() {\n      $('.head')\n        .on('keydown', '.head-input', this.addTodo.bind(this))\n        .on('click', '.round', this.toggleAll.bind(this))\n      $('.body')\n        .on('mouseenter', '.body-item', this.todoDelShow.bind(this))\n        .on('mouseleave', '.body-item', this.todoDelHide.bind(this))\n        .on('click', '.body-del', this.delTodo.bind(this))\n        .on('click', '.round', this.toggle.bind(this))\n        .on('click', '.body-label', this.tryEdit.bind(this))\n        .on('blur keydown', '.body-input', this.submitEdit.bind(this))\n      $('.foot')\n        .on('click', '.foot-del', this.delSelectedTodos.bind(this))\n        .on('click', '.foot-visibility span', this.changeVisibility.bind(this))\n    },\n    render: function() {\n      window.localStorage.setItem(NAME,JSON.stringify(this.todos))\n      var self = this\n      $('.body').empty()\n      this.todos.filter(function (todo) {\n        switch (self.visibility) {\n          case '全部': return true\n          case '被选中的': return todo.selected\n          case '未被选中的': return !todo.selected\n        }\n      }).forEach(function(todo) {\n        if (todo.selected) {\n          $('.body').append('<div class=\"body-item\"><i class=\"round round-selected\"></i><div class=\"body-label body-label-selected\">'\n            + todo.text +\n            '</div><input type=\"text\" class=\"body-input\"><i class=\"body-del\" style=\"display: none\">&times;</i></div>')          \n        } else {\n          $('.body').append('<div class=\"body-item\"><i class=\"round\"></i><div class=\"body-label\">'\n            + todo.text +\n            '</div><input type=\"text\" class=\"body-input\"><i class=\"body-del\" style=\"display: none\">&times;</i></div>')\n        }\n      })\n      this.todos.length == 0 ? $('.foot').hide() : $('.foot').show()\n      $('.foot-count').text(function() {\n        return self.todos.filter(function (todo) { \n          return todo.selected \n        }).length\n      })\n    },\n    getIndex: function(el) {\n      var all = document.getElementsByClassName('body-item')\n      for (var i = 0, len = all.length; i < len; i++) {\n        if (el === all[i]) return i\n      }\n    },\n    addTodo: function(e) {\n      if (e.keyCode === 13 && e.target.value.trim() !== '') {\n        this.todos.push({text: e.target.value, selected: false})\n        this.render()\n        e.target.value = ''\n      }\n    },\n    delTodo: function(e) {\n      var index = this.getIndex(e.target.parentNode)\n      this.todos.splice(index, 1)\n      this.render()\n    },\n    toggle: function(e) {\n      var index = this.getIndex(e.target.parentNode)\n      this.todos[index].selected = !this.todos[index].selected\n      this.render()\n    },\n    toggleAll: function() {\n      this.todos.some( function(todo) { return !todo.selected } )\n        ? this.todos.forEach( function(todo) { todo.selected = true } )\n        : this.todos.forEach( function(todo) { todo.selected = false } )\n      this.render()\n    },\n    delSelectedTodos: function() {\n      this.todos = this.todos.filter( function(todo){ return !todo.selected })\n      this.render()\n    },\n    todoDelShow: function(e) {\n      $(e.target).hasClass('body-item')\n      ? $(e.target).find('.body-del').show()\n      : $(e.target).parent().find('.body-del').show()\n    },\n    todoDelHide: function(e) {\n      $(e.target).hasClass('body-item')\n      ? $(e.target).find('.body-del').hide()\n      : $(e.target).parent().find('.body-del').hide() \n    },\n    tryEdit: function (e) {\n      $(e.target).next().val($(e.target).text()).show().select().focus()\n    },\n    submitEdit: function (e) {\n      if (e.type == 'keydown') {\n        if (e.keyCode === 13) e.target.blur()\n        return\n      }\n      var index = this.getIndex(e.target.parentNode)\n      if (e.target.value.trim()) {\n        this.todos[index].text = e.target.value\n        $(e.target).hide()\n      } else {\n        this.todos.splice(index, 1)\n      }\n      this.render()\n    },\n    changeVisibility: function (e) {\n      this.visibility = $(e.target).text()\n      $(e.target).siblings().removeClass('foot-visibility-in')\n      $(e.target).addClass('foot-visibility-in')\n      this.render()\n    }\n  }\n  App.init()\n})"
      },{
        name: 'todos.html',
        type: 'html',
        text: "<!DOCTYPE html>\n<html lang=\"zh-CN\">\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <title>jquery Todos</title>\n  <link rel=\"stylesheet\" href=\"todos.css\">\n</head>\n<body>\n  <div class=\"container\">\n    <div class=\"title\">\n      <p>jquery Todos</p>\n      <p class=\"author\">\n        <a href=\"https://github.com/haizai\" target=\"_black\">by Haizai</a>\n      </p>\n    </div>\n    <div class=\"head\">\n      <i class=\"round\"></i>\n      <input type=\"text\" placeholder=\"请输入新todos，按Enter确认\" class=\"head-input\" autofocus> \n    </div>\n    <div class=\"body\"></div>\n    <div class=\"foot\">\n      <i class=\"foot-del\">&times;</i>\n      <span class=\"foot-info\">\n        <span class=\"foot-count\"></span>\n        项被选中\n      </span>\n      <span class=\"foot-visibility\">\n        <span class=\"foot-visibility-in\">全部</span>\n        <span>被选中的</span>\n        <span>未被选中的</span>\n      </span>\n    </div>\n  </div>\n  <script src=\"../../js/common/jquery-3.1.1.min.js\"></script>\n  <script src=\"todos.js\"></script>\n</body>\n</html>"
      },{
        name: 'todos.css',
        type: 'css',
        text: "* {\n  box-sizing: border-box;\n}\nbody {\n  font-family: 'microsoft yahei';\n  color: #333;\n}\n.container {\n  width: 500px;\n  margin: 20px auto;\n}\n.title {\n  font-size: 40px;\n  line-height: 2;\n  text-align: center;\n}\n.author {\n  font-size: 14px;\n  line-height: 40px;\n  text-align: center;\n  margin-top: -60px;\n}\na {\n  color: #c05b4d;\n  text-decoration: none;\n}\na:hover {\n  text-decoration: underline;\n}\n.round {\n  display: inline-block;\n  width: 36px;\n  height: 36px;\n  margin-right: 8px;\n  border: 1px solid #ccc;\n  border-radius: 50%;\n}\n.round:hover {\n  background: #eee;\n}\n\n.round-selected {\n  background: #ccc;\n}\n.round:hover {\n  background: #ccc;\n}\n\ninput {\n  font-family: inherit;\n  font-size: 25px;\n  line-height: 40px;\n  width: 450px;\n  height: 40px;\n}\ni {\n  font-style: normal;\n  cursor: pointer;\n  color: #ccc;\n}\ni:hover {\n  color: #333;\n}\n\n.head .round {\n  margin-bottom: -8px;\n}\n.head-input {\n  padding-left: 3px;\n  border: 2px solid #ccc;\n}\n.head-input:focus {\n  outline: none;\n}\n\n.body-item {\n  height: 40px;\n  margin: 10px 0;\n}\n.body-item:hover {\n  background: #f5f5f5;\n}\n.body .round {\n  margin-top: 2px;\n}\n.body-label {\n  font-size: 25px;\n  line-height: 40px;\n  position: absolute;\n  display: inline-block;\n  overflow: hidden;\n  max-width: 410px;\n  margin-left: 7px;\n  cursor: pointer;\n  white-space: nowrap;\n  text-overflow: ellipsis;\n}\n.body-label:hover {\n  color: #ccc;\n}\n\n.body-label-selected {\n  text-decoration: line-through;\n  color: #ccc;\n}\n.body-input {\n  position: absolute;\n  display: none;\n  margin-left: 4px;\n  padding-left: 3px;\n  border: none;\n}\n.body-input:focus {\n  outline: 2px solid #ccc;\n  outline-offset: -2px;\n}\n\n.body-input-show {\n  display: inline-block;\n}\n.body-del {\n  font-size: 25px;\n  line-height: 36px;\n  float: right;\n}\n\n.foot {\n  line-height: 30px;\n}\n.foot-del {\n  font-size: 25px;\n  margin-left: 7px;\n}\n.foot-info {\n  vertical-align: 8%;\n  color: #ccc;\n}\n.foot-count {\n  color: #333;\n}\n.foot-visibility {\n  float: right;\n  margin-top: 4px;\n  cursor: pointer;\n  color: #ccc;\n}\n.foot-visibility > span:hover,\n.foot-visibility-in {\n  color: #333;\n}\n"
      }]
    },
    {
      name:'react-todos',
      title: 'React Todos',
      detail: 'demo/react-todos/index.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/react-todos',
      hasMore: true,
      codes: [{
        name:'main.js',
        type:'jsx',
        text:"import ReactDOM from 'react-dom';\nimport React from 'react';\nimport App from './components/App.jsx';\nimport './todos.css';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('app')\n)"
      },{
        name: 'components/App.jsx',
        type: 'jsx',
        text: "import React from 'react';\n\nimport Title from './Title.jsx';\nimport Head from './Head.jsx';\nimport Body from './Body.jsx';\nimport Foot from './Foot.jsx';\n\nconst NAME = 'react-todos-Haizai^0.1';\n\nexport default class App extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = JSON.parse(window.localStorage.getItem(NAME)) || {\n      todos: [{text: \"默认todo1\", selected: false, key: 0}, {text: \"默认todo2\", selected: true, key: 1}],\n      visibility: '全部',\n      allKey: 1\n    };\n  }\n  componentDidUpdate(prevProps, prevState) {\n    window.localStorage.setItem(NAME, JSON.stringify(prevState));\n  }\n  addTodo(e) {\n    if (e.keyCode === 13 && e.target.value.trim() !== '') {\n      this.state.todos.push({\n        text: e.target.value,\n        selected: false,\n        key: ++this.state.allKey\n      });\n      e.target.value = '';\n      this.forceUpdate();\n    };\n  }\n  toggleAll() {\n    this.state.todos.every( todo => todo.selected )\n      ? this.state.todos.forEach( todo => todo.selected = false )\n      : this.state.todos.forEach( todo => todo.selected = true );\n    this.forceUpdate();\n  }\n  delTodo(index) {\n    this.state.todos.splice(index, 1);\n    this.forceUpdate();\n  }\n  toggle(index) {\n    this.state.todos[index].selected = !this.state.todos[index].selected;\n    this.forceUpdate();\n  }\n  tryEdit(e) {\n    let input = e.target.nextSibling;\n    input.value = e.target.innerHTML;\n    input.style.display = 'inline-block';\n    input.select();\n    input.focus();\n  }\n  submitEdit(e, index) {\n    if (e.type == 'keydown') {\n      if (e.keyCode === 13) e.target.blur();\n      return;\n    };\n    if (e.target.value.trim()) {\n      this.state.todos[index].text = e.target.value;\n      e.target.style.display = 'none';\n    } else {\n      this.state.todos.splice(index, 1);\n    };\n    this.forceUpdate();\n  }\n  delSelectedTodos() {\n    this.setState({todos: this.state.todos.filter( todo => !todo.selected )});\n  }\n  changeVisibility(e) {\n    this.setState({visibility: e.target.textContent.trim()});\n  }\n  render() {\n    let isAllSelected = ( this.state.todos.length && this.state.todos.every( todo => todo.selected ) ) ? true : false,\n      selectedCount   = this.state.todos.filter( todo => todo.selected ).length,\n      footStyle       = this.state.todos.length === 0 ? 'none' : 'block',\n      visibilityTodos = this.state.todos.filter( todo => {\n        switch (this.state.visibility) {\n          case '全部'       : return true;\n          case '被选中的'   : return todo.selected;\n          case '未被选中的' : return !todo.selected;\n        };\n      });\n    const bodyMethods = {}\n    return (\n      <div className='container'>\n        <Title />\n        <Head \n          isAllSelected={isAllSelected}\n          addTodo={this.addTodo.bind(this)}\n          toggleAll={this.toggleAll.bind(this)}\n        />      \n        <Body\n          todos={visibilityTodos}\n          delTodo={this.delTodo.bind(this)}\n          toggle={this.toggle.bind(this)}\n          tryEdit={this.tryEdit.bind(this)}\n          submitEdit={this.submitEdit.bind(this)}\n        />   \n        <Foot\n          footStyle={footStyle}\n          selectedCount={selectedCount}\n          visibility={this.state.visibility}\n          delSelectedTodos={this.delSelectedTodos.bind(this)}\n          changeVisibility={this.changeVisibility.bind(this)}\n        />\n      </div>\n    );\n  }\n};"
      },{
        name: './Title.jsx',
        type: 'jsx',
        text: "import React from 'react';\n\nexport default class Title extends React.Component {\n  render() {\n    return (\n      <div className='title'>\n        <p>React Todos</p>\n        <p className=\"author\"><a href=\"https://github.com/haizai\" target=\"_black\">By Haizai</a></p>\n      </div>\n    )\n  }\n}"
      },{
        name: './Head.jsx',
        type: 'jsx',
        text: "import React from 'react';\n\nexport default class Head extends React.Component {\n  render() {\n    const {isAllSelected, toggleAll, addTodo} = this.props,\n      roundClass = isAllSelected ? 'round round-selected' : 'round';\n    return (\n      <div className='head'>\n        <i className={roundClass} onClick={toggleAll}/>\n        <input \n          className='head-input'\n          type='text' \n          placeholder='请输入新的todo，按Enter确认'\n          onKeyDown={addTodo}\n        />\n      </div>\n    )\n  }\n}"
      },{
        name: './Body.jsx',
        type: 'jsx',
        text: "import React from 'react';\nimport ReactCSSTransitionGroup from 'react-addons-css-transition-group';\n\nimport Todo from './Todo.jsx'\n\nexport default class Body extends React.Component {\n  render() {\n    const {todos,...methods} = this.props;\n    return (\n      <div className='body'>\n      <ReactCSSTransitionGroup \n        transitionName=\"fade\"\n        transitionEnterTimeout={300} \n        transitionLeaveTimeout={300}>      \n      {\n        todos.map((todo, index)=>{\n          return (\n              <Todo\n                methods={methods}\n                index={index}\n                text={todo.text} \n                selected={todo.selected}\n                key={todo.key}\n              />\n          )\n        })\n      }\n      </ReactCSSTransitionGroup>\n      </div>\n    )\n  }\n}"
      },{
        name: './Todo.jsx',
        type: 'jsx',
        text: "import React from 'react';\n\nexport default class Todo extends React.Component {\n   constructor(props) {\n    super(props);\n    this.state = {\n      delShow: 'none'\n    };\n  } \n  todoDelShow() {\n    this.setState({delShow: 'block'});\n  }\n  todoDelHide() {\n    this.setState({delShow: 'none'}); \n  }\n  render() {\n    const {index, selected, text, methods} = this.props,\n      {delTodo, submitEdit, toggle, tryEdit} = methods,\n      roundClass = selected ? 'round round-selected' : 'round',\n      labelClass = selected ? 'body-label body-label-selected' : 'body-label';\n    return (\n      <div \n        className='body-item' \n        onMouseEnter={this.todoDelShow.bind(this)}\n        onMouseMove={this.todoDelShow.bind(this)}\n        onMouseLeave={this.todoDelHide.bind(this)}>\n        <i \n          className={roundClass}\n          onClick={()=>toggle(index)}\n        />\n        <div \n          className={labelClass}\n          onClick={tryEdit}\n        >{text}</div>\n        <input \n          type='text' \n          className='body-input' \n          style={{display: 'none'}}\n          onKeyDown={e=>submitEdit(e, index)}\n          onBlur={e=>submitEdit(e, index)}\n        />\n        <i \n          className='body-del' \n          style={{display: this.state.delShow}}\n          onClick={()=>delTodo(index)}\n        >&times;</i>\n      </div>\n    )\n  }\n};"
      },{
        name: './Foot.jsx',
        type: 'jsx',
        text: "import React from 'react';\n\nexport default class Foot extends React.Component {\n  render() {\n    const {footStyle, delSelectedTodos, selectedCount, visibility, changeVisibility} = this.props,\n      viss = ['全部', '被选中的', '未被选中的'];\n    return (\n      <div className='foot' style={{display: footStyle}}>\n        <i className='foot-del' onClick={delSelectedTodos}>&times;</i>\n        <span className='foot-info'> <span className='foot-count'>{selectedCount}</span> 项被选中</span>\n        <span className='foot-visibility'>\n        {\n          viss.map( vis=>{\n            let className = vis == visibility ? 'foot-visibility-in' : null;\n            return (\n              <span className={className} onClick={changeVisibility} key={vis}>\n                {vis}&nbsp;\n              </span>\n            );\n          })\n        }\n        </span>\n      </div>\n    )\n  }\n}"
      }]
    },
    {
      name:'redux-todos',
      title:'Redux Todos',
      detail:'demo/redux-todos/index.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/redux-todos',
      hasMore: true,
      codes: [{
        name:'main.js',
        type:'javascript',
        text:"import ReactDOM from 'react-dom';\nimport React from 'react';\nimport { createStore } from 'redux';\nimport { Provider } from 'react-redux';\n\nimport App from './containers/App';\nimport reducer from './reducers/index';\nimport './todos.css';\n\nconst store = createStore(reducer);\n\nReactDOM.render(\n  <Provider store={store}>\n    <App/>\n  </Provider>,\n  document.getElementById('app')\n)"
      },{
        name:'containers/App.js',
        type:'javascript',
        text:"import React from 'react';\nimport { bindActionCreators } from 'redux';\nimport { connect } from 'react-redux';\n\nimport * as action from '../action/action';\nimport App from '../components/App.jsx';\nimport NAME from '../NAME';\n\nfunction mapStateToProps(state) {\n  window.localStorage.setItem(NAME, JSON.stringify(state));\n  return state;\n}\n\nfunction mapDispatchToProps(dispatch) {\n  return bindActionCreators({ ...action }, dispatch);\n}\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App)"
      },{
        name:'action/action.js',
        type:'javascript',
        text:"export const addTodo          = text => ({type: 'ADD_TODO', text});\nexport const delTodo          = index => ({type: 'DEL_TODO', index});\nexport const toggle           = index => ({type: 'TOGGLE', index});\nexport const toggleAll        = () => ({type: 'TOGGLE_ALL'});\nexport const submitEdit       = (text, index) => ({type: 'SUBMIT_EDIT', text, index});\nexport const delSelectedTodos = () => ({type: 'DEL_SELECTED_TODOS'});\nexport const changeVisibility = visibility => ({type: 'CHANGE_VISIBILITY', visibility});"
      },{
        name:'reducers/index.js',
        type:'javascript',
        text:"import { combineReducers } from 'redux';\nimport todos from './todos';\nimport visibility from './visibility';\n\nexport default combineReducers({\n  todos,\n  visibility\n})"
      },{
        name:'./todos.js',
        type:'javascript',
        text:"import NAME from '../NAME';\n\nconst initTodos = window.localStorage.getItem(NAME) \n  ? JSON.parse(window.localStorage.getItem(NAME)).todos\n  : [{text: \"默认todo1\", selected: false, key: 0}, {text: \"默认todo2\", selected: true, key: 1}];\n\nlet key = initTodos.reduce((a, b) => {\n  if (typeof a == 'object') a = a.key;\n  if (typeof b == 'object') b = b.key;\n  return Math.max(a, b);\n})\n\nexport default (todos = initTodos, action) => {\n  switch (action.type) {\n    case 'ADD_TODO':\n      return [...todos, {text: action.text, selected: false, key: ++key}];\n    case 'DEL_TODO':\n      todos.splice(action.index, 1)\n      return [...todos];\n    case 'TOGGLE':\n      todos[action.index].selected = !todos[action.index].selected;\n      return [...todos];\n    case 'TOGGLE_ALL':\n      todos.every( todo => todo.selected )\n      ? todos.forEach( todo => todo.selected = false )\n      : todos.forEach( todo => todo.selected = true );\n      return [...todos];\n    case 'SUBMIT_EDIT':\n      todos[action.index].text = action.text;\n      return [...todos];\n    case 'DEL_SELECTED_TODOS':\n      return todos.filter( todo => !todo.selected );\n    default:\n      return todos;\n  }\n}"
      },{
        name:'./visibility.js',
        type:'javascript',
        text:"import NAME from '../NAME';\n\nconst initVisibility = window.localStorage.getItem(NAME) \n  ? JSON.parse(window.localStorage.getItem(NAME)).visibility\n  : '全部';\n\nexport default (visibility = initVisibility, action) => {\n  switch (action.type) {\n    case 'CHANGE_VISIBILITY':\n      return action.visibility;\n    default:\n      return visibility;\n  }\n}"
      },]
    },
    {
      name:'weather',
      title:'天气预报',
      detail: 'demo/weather/weather.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/weather',
      codes: [{
        name:'build.js',
        type:'javascript',
        text:"Vue.transition('container', {\n  afterLeave: function(el) {\n    appVue.isTran = true\n    console.log('Transition ending. ')\n      //若过渡结束时,ajax已返回,$set data为newData,并v-show: true\n    if (appVue.isAjax) {\n      appVue.$set('data', appVue.newData)\n      appVue.isShow = true\n      document.activeElement.blur()\n      appVue.isTran = false\n      appVue.isAjax = false\n    }\n  }\n})\n\nvar appVue = new Vue({\n  created: function() { //初始化，发送ajax设置data\n    this.getAjax()\n  },\n  el: '#app',\n  data: {\n    allCity: allCityData,\n    cityInput: '切换城市',\n    isShow: true,\n    isAjax: false,\n    isTran: false\n  },\n  computed: {\n    //根据天气设置背景色\n    topBackground: function() {\n      if (this.data.now.cond.code[0] == 1) {\n        return '#70b8e3'\n      } else {\n        return '#a1b4b8'\n      }\n    }\n  },\n  methods: {\n    getAjax: function(x) {\n      //初始化时不传入参数\n      if (!x) {\n        $.ajax({\n          //获得ip\n          type: \"GET\",\n          url: 'https://pv.sohu.com/cityjson', // 必须使用https协议\n          dataType: 'script',\n          success: function() {\n            console.log('my-ip: ', returnCitySN.cip)\n            $.ajax({\n              //获得ip对应的城市名\n              type: 'GET',\n              url: 'https://apis.baidu.com/showapi_open_bus/ip/ip',\n              data: {\n                ip: returnCitySN.cip\n              },\n              headers: {\n                apikey: 'ace4c062b938e16663ff786b61323c75'\n              },\n              success: function(msg) {\n                console.log('my-city: ', msg)\n                  // 若返回了city且存在于allCityData中，\n                if (msg.showapi_res_body.city && allCityData.some(function(item) {\n                    return item === msg.showapi_res_body.city\n                  })) {\n                  changeCityAjax(msg.showapi_res_body.city, true)\n                } else {\n                  changeCityAjax('北京', true)\n                }\n              },\n              error: function() {\n                changeCityAjax('北京', true)\n              }\n            })\n          },\n          error: function() {\n            changeCityAjax('北京', true)\n          }\n        })\n      } else {\n        changeCityAjax(x)\n      }\n      // 发送ajax 改变city\n      function changeCityAjax(cityAjax, isFirst) {\n        var api = null\n        $.ajax({\n          //http://www.heweather.com/documents/api\n          type: 'GET',\n          url: 'https://api.heweather.com/x3/weather',\n          data: {\n            city: cityAjax,\n            key: '980022d93f2a4b8c8c02cdb3126ce910'\n          },\n          success: function(api) {\n            if (isFirst) {\n              appVue.$set('data', api['HeWeather data service 3.0'][0])\n              return\n            }\n            appVue.isAjax = true\n              //若ajax返回时过渡完成，直接$set data，并v-show: true\n              //否则$set newData，等待Vue.transition的afterLeave事件。\n            if (appVue.isTran) {\n              appVue.$set('data', api['HeWeather data service 3.0'][0])\n              appVue.isShow = true\n              document.activeElement.blur()\n              appVue.isTran = false\n              appVue.isAjax = false\n            } else {\n              appVue.$set('newData', api['HeWeather data service 3.0'][0])\n            }\n            console.log('Ajax return. ')\n          }\n        })\n      }\n    },\n\n    clearCityInput: function() {\n      this.cityInput = ''\n    },\n    // 重置Input输入框，不能用blur()，不然点击浮出框时也触发事件！\n    resetCityInput: function(e) {\n      if (e.target.className !== 'city-input' && e.target.className !== 'city-search-item')\n        this.cityInput = '切换城市'\n    },\n    //点击浮出框的城市\n    changeCity: function(city) {\n      this.cityInput = '切换城市'\n      this.isShow = false\n      this.getAjax(city)\n    },\n    //输入框按enter\n    getCityInput: function(cityInput) {\n      var isFond = false\n      var str = null\n      this.allCity.forEach(function(item) {\n        if (item === cityInput) {\n          isFond = true\n          str = '切换城市'\n        }\n      })\n      if (str) {\n        this.cityInput = '切换城市'\n        this.isShow = false\n        this.getAjax(cityInput)\n      }\n      if (!isFond) {\n        alert('未找到所查城市')\n      }\n    }\n  },\n  filters: {\n    dateHour: function(date) {\n      return date.split(' ')[1]\n    },\n    // 后几天的日期\n    indexToWeekDay: function(index) {\n      if (index === 0) {\n        return '今天'\n      } else if (index === 1) {\n        return '明天'\n      } else {\n        var num = new Date().getDay() + index\n        switch (num) {\n          case 2:\n          case 9:\n            return \"周二\";\n          case 3:\n          case 10:\n            return \"周三\";\n          case 4:\n          case 11:\n            return \"周四\";\n          case 5:\n          case 12:\n            return \"周五\";\n          case 6:\n            return \"周六\";\n          case 7:\n            return \"周日\";\n          case 8:\n            return \"周一\";\n          default:\n            return \"未知\";\n        }\n      }\n    },\n    popToicon: function(num) {\n      var i = null\n      if (num > 50) {\n        i = 306\n      } else {\n        i = 102\n      }\n      return {\n        'background-image': 'url(png/' + i + '.png)'\n      }\n    },\n    //根据input过滤所有城市\n    searchCity: function(allCity, input, nowCity) {\n      if (input.trim()) {\n        var arr = []\n        var reg = new RegExp(input, \"g\")\n        allCity.forEach(function(city) {\n          if (reg.test(city) && city !== nowCity) {\n            arr.push(city)\n          }\n        })\n        return arr\n      }\n    }\n  }\n})"
      },{
        name:'weather.html',
        type:'html',
        text:"<!DOCTYPE html>\n<html>\n<head>\n  <meta charset=\"utf-8\">\n  <meta http-equiv=\"X-UA-Compatible\" content=\"IE=edge\">\n  <meta name=\"viewport\" content=\"width=device-width,initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no\"/>\n  <title>天气预报</title>\n  <link rel=\"stylesheet\" href=\"style.css\">\n</head>\n<body>\n<div id=\"app\">\n  <div class=\"container\" @click=\"resetCityInput($event)\" v-show=\"isShow\" transition=\"container\">\n\n    <div class=\"top\" :style=\"{'background':topBackground}\">\n      <div class=\"head\">\n        <p class=\"city-name\" v-text=\"data.basic.city\"></p>\n        <div class=\"city-search\">\n          <input \n          type=\"text\" \n          class=\"city-input\" \n          v-model=\"cityInput\" \n          @focus=\"clearCityInput()\" \n          @keydown.enter.prevent=\"getCityInput(cityInput)\">\n          <div \n          class=\"city-search-box\" \n          v-show=\"allCity | searchCity cityInput data.basic.city \">\n            <div \n            class=\"city-search-item\" \n            v-for=\"city in allCity | searchCity cityInput data.basic.city\" \n            track-by=\"$index\" \n            v-text=\"city\" \n            @click=\"changeCity(city)\"></div>\n          </div>        \n        </div>\n\n        <p class=\"now-cond\">\n          <span style=\"vertical-align: 30%\" v-text=\"data.now.cond.txt\"></span>\n          <i style=\"position:absolute\" :style=\"{'background-image':'url(png/'+data.now.cond.code+'.png)'}\"></i>\n        </p>\n        <p class=\"now-tmp\">\n          <span v-text=\"data.now.tmp\"></span><!--  惊了! 辣鸡ie专用注释\n       --><span class=\"now-tmp-after\" v-text=\"'°'\"></span>\n        </p>\n      </div>\n\n      <div class=\"hourly\">\n        <div class=\"hourly-item\" v-for=\"item in data.hourly_forecast\">\n          <p v-text=\"item.date | dateHour\"></p>\n          <p>\n            <span style=\"vertical-align: 20%\" class=\"hourly-pop\" v-text=\"item.pop +'%'\"></span>\n            <i style=\"position:absolute\" :style=\"item.pop|popToicon\"></i>\n          </p>\n          <p class=\"hourly-tmp\" v-text=\"item.tmp+'°'\"></p>\n        </div>\n      </div>    \n    </div>\n    \n    <div class=\"daily\">\n      <div class=\"daily-item\" v-for=\"(index,day) in data.daily_forecast\">\n        <p class=\"daily-date\" v-text=\"index|indexToWeekDay\"></p>\n        <p>\n          <i :style=\"{'background-image':'url(png/'+day.cond.code_d+'.png)'}\" :title=\"day.cond.txt_d\"></i>\n          <i :style=\"{'background-image':'url(png/'+day.cond.code_n+'.png)'}\" :title=\"day.cond.txt_n\"></i>\n        <p>\n        <p v-text=\"day.tmp.min+'°/'+day.tmp.max+'°'\"></p>\n      </div>\n    </div>\n\n  </div>\n</div>\n\n  <script src=\"allCityData.js\"></script>\n  <script src=\"../../js/common/jquery-3.1.1.min.js\"></script>\n  <script src=\"vue.min.js\"></script>\n  <script src=\"build.js\"></script>\n</body>\n</html>"
      },{
        name:'style.css',
        type:'css',
        text:".container-transition {\n  transition: all .3s;\n}\n.container-leave,\n.container-enter {\n  transform: translate(-100%, 0);\n opacity: 0;\n}\n\n* {\n  margin: 0;\n  padding: 0;\n}\n#app {\n  font-family: 'microsoft yahei';\n}\ni {\n  display: inline-block;\n width: 25px;\n  height: 25px;\n background-size: 25px 25px;\n}\n.top {\n  width: 100%;\n  padding: 70px 0 40px;\n}\n\n.head {\n  width: 700px;\n  margin: 0 auto;\n text-align: center;\n color: #fff;\n}\n.head .city-name {\n  font-size: 30px;\n  line-height: 1.4;\n}\n.head .now-cond {\n  line-height: 25px;\n}\n.head .now-tmp {\n  font-family: simhei;\n  font-size: 140px;\n  line-height: .9;\n}\n.head .now-tmp-after {\n  font-size: 60px;\n position: absolute;\n}\n\n.city-search {\n  width: 150px;\n  margin: 0 auto;\n}\n.city-input {\n  width: 100%;\n cursor: pointer;\n  text-align: center;\n color: #ddd;\n  border: none;\n  background-color: inherit;\n}\n.city-search-box {\n  position: absolute;\n  z-index: 1;\n overflow: auto;\n width: 150px;\n  max-height: 220px;\n color: #666;\n  border-radius: 3px;\n  background: #fff;\n  box-shadow: 0 0 3px 0 #999;\n}\n.city-search-item {\n  line-height: 1.5;\n cursor: pointer;\n}\n.city-search-item:hover {\n  background: #ddd;\n}\n\n.hourly {\n  line-height: 1.5;\n display: flex;\n width: 700px;\n  margin: 70px auto 0;\n color: #fff;\n}\n.hourly-item {\n  display: inline-block;\n text-align: center;\n flex: 1;\n}\n.hourly-tmp {\n  font-size: 22px;\n  line-height: 1;\n}\n\n.daily {\n  line-height: 1.5;\n display: flex;\n width: 800px;\n  margin: 40px auto 0;\n justify-content: center;\n  flex-wrap: wrap;\n}\n.daily-item {\n  display: inline-block;\n min-width: 105px;\n  margin-top: 20px;\n text-align: center;\n flex: 1;\n}\n.daily-date {\n  line-height: 2;\n}\n\n@media screen and (max-width: 800px) {\n  .head,\n  .daily,\n  .hourly {\n    font-size: 12px;\n   width: 100%;\n  }\n  .daily {\n    flex-wrap: wrap;\n  }\n  .city-search-item,\n  .now-cond {\n    font-size: 16px;\n  }\n  .hourly i {\n    display: none;\n  }\n  .hourly .hourly-tmp {\n    font-size: 18px;\n  }\n  i {\n    display: inline-block;\n   width: 20px;\n    height: 20px;\n   background-size: 20px 20px;\n  }\n}"
      }]
    },
    {
      name:'vuex-todos',
      title:'Vuex Todos',
      detail: 'demo/vuex-todos/index.html',
      github: 'https://github.com/haizai/cloud/tree/master/server/public/demo/vuex-todos',
      hasMore: true,
      codes: [{
        name:"main.js",
        type:'javascript',
        text:"import Vue from 'vue'\nimport App from './App.vue'\nimport './css/todos.css'\n\nnew Vue({\n  el: '#app',\n  components: {\n    App\n  }\n})"
      },{
        name:'App.vue',
        type:'html',
        text:"<template>\n  <div class=\"container\">\n    <div class=\"title\">\n      <p>Vuex Todos</p>\n      <p class=\"author\">\n        <a href=\"https://github.com/haizai\" target=\"_black\">By Haizai</a>\n      </p>\n    </div>\n    <todos></todos> \n  </div>\n</template>\n\n<script>\n  import store from './vuex/store'\n  import todos from './components/todos.vue'\n  export default {\n    components:{\n      todos\n    },\n    store\n  }\n</script>"
      },{
        name:'vuex/store.js',
        type:'javascript',
        text:"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst NAME = 'todo-vuex-haizai'\n\n//若localStorage有此值则取出\nconst state = JSON.parse( window.localStorage.getItem(NAME) ) || {\n  todos: [{text: \"默认todo1\", selected: false}, {text: \"默认todo2\", selected: true}],\n  visibility: \"all\"\n}\n\nconst mutations = {\n  //增加todo\n  ADD_TODO (state, text) {\n    state.todos.push({\n      text,\n      selected: false\n    })\n  },\n  //删除todos\n  DEL_TODO (state, index) {\n    state.todos.splice(index, 1)\n  },\n  //切换选中\n  TOGGLE (state, index) {\n    state.todos[index].selected = !state.todos[index].selected\n  },\n  //删除选中的todos\n  DEL_SELECTED_TODOS (state) {\n    state.todos = state.todos.filter( todo => !todo.selected )\n  },\n  //改变visibility\n  CHANGE_VISIBILITY (state, visibility) {\n    state.visibility = visibility\n  },\n  //全选或解除全选\n  TOGGLE_ALL (state) {\n    state.todos.some( todo => !todo.selected)\n      ? state.todos.forEach( todo => todo.selected = true)\n      : state.todos.forEach( todo => todo.selected = false)\n  },\n  //修改todo的文本\n  CHANGE_TEXT (state, index, text) {\n    state.todos[index].text = text\n  }\n}\n\nconst store = new Vuex.Store({\n  state,\n  mutations  \n})\n\n//观测state,将其json化存在localStorage中\nstore.watch( (state) => window.localStorage.setItem( NAME, JSON.stringify(state) ) )\n\nexport default store"
      },{
        name:'./action.js',
        type:'javascript',
        text:"export const addTodo = makeAction ('ADD_TODO')\nexport const delTodo = makeAction ('DEL_TODO')\nexport const toggle = makeAction ('TOGGLE')\nexport const delSelectedTodos = makeAction ('DEL_SELECTED_TODOS')\nexport const changeVisibility = makeAction ('CHANGE_VISIBILITY')\nexport const toggleAll = makeAction ('TOGGLE_ALL')\nexport const changeText = makeAction ('CHANGE_TEXT')\n\nfunction makeAction (type) {\n  return ({ dispatch }, ...args) => dispatch(type, ...args)\n}"
      },{
        name:'components/todos.vue',
        type:'html',
        text:"<template>\n  <div class=\"head\">\n    <i \n      class=\"round\" \n      :class=\"{'round-selected':isAllSelect}\"\n      @click=\"toggleAll\"></i>\n    <input \n      type=\"text\" \n      class=\"head-input\" \n      placeholder=\"输入新的todo，按Enter确认\"\n      autofocus\n      @keydown.enter=\"tryAddTodo\">\n  </div>\n  <div class=\"body\">\n    <todo v-for=\"(index, todo) in todosByVisibility\" :todo=\"todo\" :index=\"index\"></todo>  \n  </div>\n  <foot v-show=\"todos.length\"></foot>  \n</template>\n\n<script>\n  import { addTodo, toggleAll } from '../vuex/actions'\n  import todo from './todo.vue'\n  import foot from './foot.vue'\n  export default{\n    vuex: {\n      getters: {\n        todos: state => state.todos,\n        visibility: state => state.visibility\n      },\n      actions: {\n        addTodo,\n        toggleAll\n      }\n    },\n    computed: {\n      todosByVisibility () {\n        return this.todos.filter( todo => {\n          switch (this.visibility) {\n            case 'all':\n              return true\n            case 'selected':\n              return todo.selected\n            case 'unselected':\n              return !todo.selected\n          }\n        })\n      },\n      isAllSelect () {\n        return this.todos.length > 0 && this.todos.every( todo => todo.selected )\n      }\n    },\n    methods: {\n      tryAddTodo (e) {\n        if (e.target.value.trim()) {\n          this.addTodo(e.target.value.trim())\n          e.target.value = ''\n        }\n      }\n    },\n    components: {\n      todo,\n      foot\n    }\n  }\n</script>"
      },{
        name:'./todo.vue',
        type:'html',
        text:"<template>\n  <div \n      class=\"body-item\"\n      transition=\"fade\"\n      @mouseenter=\"toggleMouseEnter(true)\"\n      @mouseleave=\"toggleMouseEnter(false)\">\n    <i \n      class=\"round\" \n      :class=\"{'round-selected':todo.selected}\" \n      @click=\"toggle(index)\"></i>\n    <div \n      class=\"body-label\"\n      :class=\"{'body-label-selected':todo.selected}\"\n      @click=\"tryEdit\">{{todo.text}}</div>\n    <input \n      type=\"text\" \n      class=\"body-input\"\n      :class=\"{'body-input-show':isInputShow}\"\n      @keydown.enter=\"submitEdit\"\n      @blur=\"submitEdit\">\n    <i \n      class=\"body-del\" \n      v-show=\"isMouseEnter\"\n      @click=\"delTodo(index)\">&times;</i>\n  </div>\n</template>\n\n<script>\n  import { delTodo, toggle, changeText } from '../vuex/actions'\n  export default {\n    props: ['todo', 'index'],\n    data() { return {\n      isMouseEnter: false,\n      isInputShow: false\n    }},\n    vuex: {\n      getters: {\n        todos: state => state.todos\n      },\n      actions: {\n        delTodo, \n        toggle,\n        changeText\n      }\n    },\n    methods: {\n      toggleMouseEnter (bool) {\n        this.isMouseEnter = bool\n      },\n      tryEdit (e) {\n        this.isInputShow = true\n        this.$nextTick(() => {\n          var input = e.target.nextElementSibling\n          input.value = this.todo.text\n          input.focus()\n          input.select()\n        })\n      },\n      submitEdit (e) {\n        if (e.target.value.trim()) {\n          this.changeText(this.index, e.target.value.trim())\n          this.isInputShow = false\n        } else {\n          this.delTodo(this.index)\n        }\n      }\n    }\n  }\n</script>\n"
      },{
        name:'./foot.vue',
        type:'html',
        text:"<template>\n  <div class=\"foot\">\n    <i class=\"foot-del\" @click=\"delSelectedTodos\">&times; </i>\n    <span class=\"foot-info\">\n      <span class=\"foot-count\">{{selectedLength}}</span> 项被选中\n    </span>\n    <span class=\"foot-visibility\">\n      <span :class=\"{'foot-visibility-in': visibility==='all'}\" @click=\"changeVisibility('all')\">全部</span>\n      <span :class=\"{'foot-visibility-in': visibility==='selected'}\" @click=\"changeVisibility('selected')\">被选中的</span>\n      <span :class=\"{'foot-visibility-in': visibility==='unselected'}\" @click=\"changeVisibility('unselected')\">未被选中的</span>      \n    </span>\n  </div>\n</template>\n\n<script>\n  import { delSelectedTodos, changeVisibility} from '../vuex/actions'\n  export default{\n    vuex: {\n      getters: {\n        todos: state => state.todos,\n        visibility: state => state.visibility,\n      },\n      actions: {\n        delSelectedTodos,\n        changeVisibility\n      }\n    },\n    computed: {\n      selectedLength () {\n        return this.todos.filter( todo => todo.selected ).length\n      }\n    }\n  }\n</script>"
      }]
    },
    {
      name:'questionnaire',
      title:'问卷调查',
      detail:'demo/questionnaire/index.html',
      github:'https://github.com/haizai/cloud/tree/master/server/public/demo/questionnaire',
      hasMore:true,
      codes:[{
        name:'main.js',
        type:'javascript',
        text:"import Vue from 'vue'\nimport filters from './filters'\nimport VueRouter from 'vue-router'\nimport routeConfig from './route-config'\nimport app from './app.vue'\nimport './scss/main.scss'\n\nObject.keys(filters).forEach( key => Vue.filter(key, filters[key]) )\n\nVue.use(VueRouter)\nconst router = new VueRouter()\nrouter.map(routeConfig)\n//重定向\nrouter.redirect({\n  '/':'/list'\n})\n\nrouter.start(Vue.extend(app), '#app')"
      },{
        name:'route-config.js',
        type:'javascript',
        text:"import list from './views/list.vue'\nimport ans from './views/ans.vue'\nimport detail from './views/detail.vue'\nimport New from './views/new.vue'\n\nexport default {\n  '/list': {\n    name: 'list',\n    component: list\n  },\n  '/ans/:id': {\n    name: 'ans',\n    component: ans\n  },\n  '/detail/:id': {\n    name: 'detail',\n    component: detail\n  },\n  '/new': {\n    name: 'new',\n    component: New    \n  }\n}"
      },{
        name:'App.vue',
        type:'html',
        text:"<template>\n  <div>\n    <div class=\"header\"></div>\n    <div class=\"container\">\n      <div class=\"top\">\n        <span class=\"top-left\">问卷管理</span>\n        <span class=\"top-right\" v-link=\"{name:'list'}\">我的主页</span>\n        <a class=\"top-author\" href=\"https://github.com/haizai\">Building by Haizai</a>\n      </div>\n      <router-view></router-view>\n    </div>\n  </div>\n</template>\n\n<script>\n  import store from './vuex/store'\n\n  export default {\n    store\n  }\n</script>"
      },{
        name:'vuex/store.js',
        type:'javascript',
        text:"import Vue from 'vue'\nimport Vuex from 'vuex'\n\nVue.use(Vuex)\n\nconst NAME = 'vue-questionnaire-0.1.0-haizai'\n\nconst defaultNaires = [\n  {\n    title: \"这是一份已截止的测试问卷\",\n    endTime: +new Date(2016,6,8),\n    ques: [{\n      title  :'这是单选题目1',\n      type   :'radio',\n      values :['选项1','选项2','选项3',\"选项4\",'选项5']\n    },{\n      title  :'这是多选题目2',\n      type   :'checkbox',\n      values :['选项1','选项2','选项4',\"选项4\",\"选项5\"] \n    },{\n      title  :'这是文本题目3',\n      type   :'textarea'\n    }],\n    anss:[\n      [1, [1, 3], '你千万要记住了，不要见到风是得雨，'],\n      [3, [1, 0], null],\n      [2, [1, 3, 0], '香港记者不只跑得快，本身也要学会判断'],\n      [1, [1, 3, 2], '无中生有的东西，你再说一遍，等于你也有责任吧？'],\n      [1, [1, 2], null],\n      [0, [1, 2, 3, 0], '你们啊，不要想搞个大新闻，'],\n      [0, [1], null],\n      [1, [1], null],\n      [2, [1, 2], 'naive!'],\n      [1, [1, 3], '编不下去了'],\n      [4, [3, 4], '真的编不下去了']\n    ]\n  },\n  {\n    title   : \"关于大学生夜生活的调查问卷\",\n    endTime : +new Date(2020, 10 ,5),\n    ques    : [{\n      title  :'你的年级是?',\n      type   :'radio',\n      values :['大一','大二','大三',\"大四\"]\n    },{\n      title  :'你的性别是?',\n      type   :'radio',\n      values :['男','女']  \n    },{\n      title  :'你周一到周五一般几点睡觉?',\n      type   :'radio',\n      values :['22:00以前','22:00-23:00','23:00-0:00','0:00-1:00','1:00以后']\n    },{\n      title  :'你周一到周五点晚上都干什么?',\n      type   :'checkbox',\n      values :['玩电脑','玩手机','聊天','学习','其他'] \n    },{\n      title  :'你周末一般几点睡觉?',\n      type   :'radio',\n      values :['22:00以前','22:00-23:00','23:00-0:00','0:00-1:00','1:00以后']\n    },{\n      title  :'你周末晚上都干什么?',\n      type   :'checkbox',\n      values :['玩电脑','玩手机','聊天','学习','其他']\n    },{\n      title  :'你觉得你睡眠不好的原因是什么?',\n      type   :'textarea'\n    }],\n    anss:[]\n  }\n]\n\nconst state = JSON.parse(window.localStorage.getItem(NAME)) || {naires: defaultNaires}\n\nconst mutations = {\n  //提交答卷\n  SUBMIT_ANS (state, index, ans) {\n    state.naires[index].anss.push(ans)\n  },\n  //创建新问卷\n  CREATE_NAIRE (state, naire) {\n    state.naires.push(naire)\n  }\n}\n\nconst store = new Vuex.Store({\n  state,\n  mutations  \n})\n\nstore.watch( state => window.localStorage.setItem(NAME, JSON.stringify(state)) )\n\nexport default store"
      },{
        name:'./actions.js',
        type:'javascript',
        text:"export const submitAns   = makeAction ('SUBMIT_ANS')\nexport const createNaire = makeAction ('CREATE_NAIRE')\n\nfunction makeAction (type) {\n  return ({ dispatch }, ...args) => dispatch(type, ...args)\n}"
      },{
        name:'scss/main.scss',
        type:'scss',
        text:"//公用\n@import './variable';\n@import './mixin';\n@import './common';\n@import './transition';\n//views\n@import './list';\n@import './detail';\n@import './ans';\n@import './new';\n//components\n@import './modal';"
      },{
        name:'views/new.vue',
        type:'html',
        text:"<template>\n<div>\n  <h3 class=\"content-title\">新建问卷</h3>\n  <div class=\"new content\">\n    <div class=\"new-toggle new-title\" :class=\"{'warning':!title}\">\n      <input \n        type=\"text\" \n        @blur=\"hideInput\" \n        @keydown.enter=\"hideInput\"\n        v-model=\"title\">\n      <span @click=\"showInput\">点我输入标题</span>\n    </div>\n    <div class=\"new-que\" v-for=\"(queIndex, que) in ques\" transition=\"fade\">\n      <button \n        type=\"button\" \n        class=\"new-que-btn\" \n        v-show=\"que.step === 0\" \n        @click=\"createNewQue(queIndex)\">+ 新建题目</button>\n        \n        <div class=\"new-que-type\" v-show=\"que.step === 1\" transition=\"scaleY\">\n          <div @click=\"typeSelect(queIndex, 'radio')\">+ 单选题</div><!--\n       --><div @click=\"typeSelect(queIndex, 'checkbox')\">+ 多选题</div><!--\n       --><div @click=\"typeSelect(queIndex, 'textarea')\">+ 文本题</div>\n        </div>\n\n      <div class=\"new-que-body\" v-show=\"que.step === 2\" transition=\"fade\">\n        <p class=\"new-toggle new-que-title\" :class=\"{'warning':!que.title}\">\n          <input \n            type=\"text\" \n            @blur=\"hideInput\" \n            @keydown.enter=\"hideInput\"\n            v-model=\"que.title\">\n          <span @click=\"showInput\">{{que.title}}</span>\n          <small v-text=\"que.type | typeToRead\"></small>\n          <i  @click=\"delQue(queIndex)\">&times;</i>\n        </p>\n        <p \n          class=\"new-toggle new-que-rc\"\n          v-if=\"que.type == 'radio' || que.type == 'checkbox'\"\n          v-for=\"(valueIndex, value) in que.values\"\n          track-by=\"$index\"\n          :class=\"{'warning':!value}\">\n          <input \n            type=\"text\" \n            @blur=\"hideInput\" \n            @keydown.enter=\"hideInput\"\n            v-model=\"value\">\n          <span @click=\"showInput\">{{value}}</span>\n          <i v-show=\"que.values.length > 2\" @click=\"delValue(queIndex, valueIndex)\">&times;</i>\n        </p>\n        <p v-if=\"que.type == 'radio' || que.type == 'checkbox'\" \n          class=\"new-que-add\" \n          @click=\"addValue(queIndex)\">+ 添加选项</p>\n      </div>   \n      <hr>    \n    </div>\n    <div class=\"new-date\">\n      <span :class=\"{'warning':dateClass}\">截止日期:</span>\n      <input type=\"text\" v-model=\"modelYear\" maxlength=\"4\">\n      <label :class=\"{'warning':dateClass}\">年</label>\n      <input type=\"text\" v-model=\"modelMonth\" maxlength=\"2\">\n      <label :class=\"{'warning':dateClass}\">月</label>\n      <input type=\"text\" v-model=\"modelDate\" maxlength=\"2\">\n      <label :class=\"{'warning':dateClass}\">日</label>\n    </div>\n    <hr>\n    <div class=\"new-button\">\n      <div><button v-link=\"{name:'list'}\">返回</button></div><!--\n   --><div><button @click=\"tryCreate\" class=\"info\">确认</button></div>\n    </div> \n\n    <modal-new v-show=\"modalShow\" :naire=\"naire\"></modal-new>\n  </div>\n</div>\n</template>\n\n<script>\n  import modalNew from '../components/modalNew.vue'\n  export default {\n    components: {\n      modalNew\n    },\n    vuex: {\n      getters: {\n        naires: state => state.naires\n      }\n    },\n    data() { return {\n      modalShow  : false,\n      dateClass  : false,\n      title      :'点我输入标题',\n      modelYear  : '',\n      modelMonth : '',\n      modelDate  : '',\n      ques: [{\n        step: 0, //0->点击btn之前, 1->选择type之前，2->正式的题目\n        type: '',\n        title: '点我输入题目',\n        values: ['选项1','选项2','选项3','选项4']\n      }]\n    }},\n    watch: {\n      //每当step为2时，出现新的btn\n      ques: {\n        handler(ques){ \n          if (ques[ques.length-1].step === 2) {\n            ques.push({\n              step   : 0,\n              type   : '',\n              title  : '点我输入题目',\n              values : ['选项1','选项2','选项3','选项4']              \n            })\n          }\n        },\n        deep: true\n      }\n    },\n    computed: {\n      //计算要提交的问卷\n      naire() {\n        let title = this.title.trim()\n        let ques = this.ques.map( que => {\n          if (que.step === 2) {\n            if (que.type === 'radio' || que.type === 'checkbox') {\n              return {title: que.title.trim(), type: que.type, values: que.values}\n            } else {\n              return {title: que.title.trim(), type: que.type}\n            }\n          }\n        })\n        ques.pop()\n        let endTime = +new Date(this.modelYear, this.modelMonth-1, this.modelDate)\n        return {\n          anss: [],\n          endTime,\n          title,\n          ques\n        }\n      }\n    },\n    methods: {\n      //点击div,显示后面的input\n      showInput(e) {\n        e.stopPropagation()\n        if (e.target.tagName === \"INPUT\") return\n        let input = e.target.previousElementSibling\n        input.style.display = 'inline-block'\n        input.value = e.target.firstChild.data\n        input.focus()\n        input.select()\n      },\n      //隐藏input\n      hideInput(e) {\n        let input = e.target\n        input.style.display = 'none'\n        input.value.trim() ?\n          input.nextElementSibling.firstChild.data = input.value.trim() :\n          input.nextElementSibling.firstChild.data = '请输入非空值'   \n      },\n      createNewQue(index) {\n        this.ques[index].step = 1\n      },\n      typeSelect(index,type) {\n        this.ques[index].step = 2\n        this.ques[index].type = type\n      },\n      delQue(index) {\n        this.ques.splice(index, 1)\n      },\n      addValue(index) {\n        this.ques[index].values.push('新选项')\n      },\n      delValue(queIndex, valueIndex) {\n        this.ques[queIndex].values.splice(valueIndex, 1)\n      },\n      testTime() {\n        if (this.modelYear && +this.modelYear > 2015 &&\n            this.modelMonth && +this.modelMonth > 0 && + this.modelMonth < 13 && \n            this.modelDate && +this.modelDate > 0 && this.modelDate < 32 &&\n            /^[0-9]+$/.test(this.modelYear + this.modelMonth + this.modelDate)) {\n          let d = new Date(this.modelYear, this.modelMonth-1, this.modelDate)\n          if (d > new Date()) {\n            this.dateClass = false\n            return d\n          }\n        }\n        this.dateClass = true\n        return false\n      },\n      tryCreate() {\n        let d = this.testTime()\n        if (!d) return\n        if (this.naire.ques.length === 0 ) return\n        let warnings1 = document.getElementsByClassName('new-title')[0].getElementsByClassName('warning')\n        let warnings2 = document.getElementsByClassName('new-que')[0].getElementsByClassName('warning')\n        if (warnings1.length + warnings2.length === 0) {\n          this.modalShow = true\n        } else {\n          document.body.scrollTop = warnings[0].offsetTop - 50\n          document.documentElement.scrollTop = warnings[0].offsetTop - 50\n        }\n      }\n    },\n    events: {\n      //隐藏弹出框\n      modalHide() {\n        this.modalShow = false\n      }\n    }\n  }\n</script>"
      },]
    }
  ]


  var bH = $('body').height() 
  $('.code-warp').css({height:bH - 220 + 'px'})




  $('.part-demos-warp [code]').on('click', function() {
    _isAllowedMousewheel = false
    var $code = $('.code-all')
    $code.show()
    $code.find('.code-del').on('click', function(){
      _isAllowedMousewheel = true
      $code.hide()
    })

    var codeName = $(this).attr('code')

    $('.code-slide').html('')
    $('.code-body').html('')

    Codes.forEach(function(obj){
      if (obj.name === codeName) {
        $('.code-title').text(obj.title)
        $('.code-detail').parent().attr('href',obj.detail)
        $('.code-github').parent().attr('href',obj.github)

        obj.codes.forEach( function(code, index) {
          $('.code-slide').append('<li>' + code.name +'</li>')
          $('.code-body').append('<li><pre class="language-' +code.type+'" style="height: ' + (bH - 320) +'px"><code class="language-' +code.type+ '">'+ Prism.highlight(code.text,Prism.languages[code.type]) +'</code></pre></li>')
          if (index == 0) {
            $('.code-slide').find('li').addClass('code-slide-in')
            $('.code-body').find('li').show()
          }
        });

        if (obj.hasMore) {
          $('.code-slide').append('<li class="code-more"><a style="color: #333" target="_black" href="'+ obj.github +'">更多...</li>')
        }
      }
    })




    // //不同code转换
    $('.code-slide li').not('.code-more').each(function(index) {
      $(this).on('click', function(){
        $('.code-slide li').removeClass('code-slide-in')
        $(this).addClass('code-slide-in')
        $('.code-body li').hide()
        $('.code-body li').eq(index).show()
      })
    })


  })


})